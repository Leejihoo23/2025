import streamlit as st
import datetime
import random

# ì•± ê¸°ë³¸ ì„¤ì •
st.set_page_config(page_title="ë³„ìë¦¬ ì˜¤ëŠ˜ì˜ ìš´ì„¸", page_icon="âœ¨", layout="centered")

# --- ìŠ¤íƒ€ì¼ (CSS) ---
st.markdown(
    """
    <style>
    .title {
        font-size:36px;
        font-weight:800;
        text-align:center;
        color:#9333ea;
    }
    .subtitle {
        font-size:18px;
        text-align:center;
        color:#475569;
    }
    .fortune-box {
        margin-top:20px;
        padding:20px;
        border-radius:12px;
        background:linear-gradient(180deg, #faf5ff, #f3e8ff);
        text-align:center;
        font-size:20px;
        font-weight:600;
        color:#4c1d95;
        box-shadow: 0px 4px 12px rgba(0,0,0,0.08);
    }
    .lucky-box {
        margin-top:15px;
        padding:15px;
        border-radius:10px;
        background:#ecfdf5;
        color:#065f46;
        font-size:18px;
        font-weight:600;
        text-align:center;
    }
    </style>
    """,
    unsafe_allow_html=True,
)

# --- ë³„ìë¦¬ ê³„ì‚° í•¨ìˆ˜ ---
def get_zodiac(month, day):
    zodiac_dates = [
        ("ë¬¼ë³‘ìë¦¬", (1, 20), (2, 18)),
        ("ë¬¼ê³ ê¸°ìë¦¬", (2, 19), (3, 20)),
        ("ì–‘ìë¦¬", (3, 21), (4, 19)),
        ("í™©ì†Œìë¦¬", (4, 20), (5, 20)),
        ("ìŒë‘¥ì´ìë¦¬", (5, 21), (6, 21)),
        ("ê²Œìë¦¬", (6, 22), (7, 22)),
        ("ì‚¬ììë¦¬", (7, 23), (8, 22)),
        ("ì²˜ë…€ìë¦¬", (8, 23), (9, 22)),
        ("ì²œì¹­ìë¦¬", (9, 23), (10, 23)),
        ("ì „ê°ˆìë¦¬", (10, 24), (11, 22)),
        ("ì‚¬ìˆ˜ìë¦¬", (11, 23), (12, 21)),
        ("ì—¼ì†Œìë¦¬", (12, 22), (1, 19)),
    ]

    for zodiac, start, end in zodiac_dates:
        if start[0] == end[0]:
            if month == start[0] and start[1] <= day <= end[1]:
                return zodiac
        else:
            if (month == start[0] and day >= start[1]) or (month == end[0] and day <= end[1]):
                return zodiac
    return None

# --- ë³„ìë¦¬ë³„ ìš´ì„¸ ë©”ì‹œì§€ ---
zodiac_fortunes = {
    "ë¬¼ë³‘ìë¦¬": ["ìƒˆë¡œìš´ ì•„ì´ë””ì–´ê°€ ë– ì˜¤ë¥´ëŠ” ë‚ ì…ë‹ˆë‹¤.", "ì£¼ë³€ì˜ ë„ì›€ìœ¼ë¡œ ì¼ì´ ìˆ ìˆ  í’€ë¦½ë‹ˆë‹¤."],
    "ë¬¼ê³ ê¸°ìë¦¬": ["ê°ì„±ì´ í’ë¶€í•´ì§€ëŠ” í•˜ë£¨ì…ë‹ˆë‹¤.", "ëˆ„êµ°ê°€ì˜ ê³ ë§ˆì›€ì„ ëŠë¼ê²Œ ë  ê±°ì˜ˆìš”."],
    "ì–‘ìë¦¬": ["ë„ì „ì´ í–‰ìš´ì„ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤.", "ì—´ì •ì ì¸ íƒœë„ê°€ ì¢‹ì€ ê²°ê³¼ë¥¼ ì¤ë‹ˆë‹¤."],
    "í™©ì†Œìë¦¬": ["ì•ˆì •ê³¼ ì„±ì‹¤í•¨ì´ ë¹›ë‚˜ëŠ” í•˜ë£¨ì…ë‹ˆë‹¤.", "ì¬ì •ì ìœ¼ë¡œ ìœ ë¦¬í•œ ê¸°íšŒê°€ ì˜¬ ìˆ˜ ìˆì–´ìš”."],
    "ìŒë‘¥ì´ìë¦¬": ["ì†Œí†µ ëŠ¥ë ¥ì´ ë‹ë³´ì´ëŠ” ë‚ ì…ë‹ˆë‹¤.", "ì˜ˆìƒì¹˜ ëª»í•œ ë§Œë‚¨ì´ ê¸°ë‹¤ë¦¬ê³  ìˆìŠµë‹ˆë‹¤."],
    "ê²Œìë¦¬": ["ê°€ì¡±ê³¼ì˜ ì‹œê°„ì´ í° í˜ì´ ë©ë‹ˆë‹¤.", "ë”°ëœ»í•œ ë§ í•œë§ˆë””ê°€ ì¢‹ì€ ê²°ê³¼ë¥¼ ë§Œë“­ë‹ˆë‹¤."],
    "ì‚¬ììë¦¬": ["ìì‹ ê°ì„ ë³´ì¼ìˆ˜ë¡ ìš´ì´ ë”°ë¦…ë‹ˆë‹¤.", "ë¦¬ë”ì‹­ì´ ì¸ì •ë°›ëŠ” í•˜ë£¨ì…ë‹ˆë‹¤."],
    "ì²˜ë…€ìë¦¬": ["ì„¸ì‹¬í•¨ì´ ì¢‹ì€ ê²°ê³¼ë¥¼ ë§Œë“­ë‹ˆë‹¤.", "ì‘ì€ ì„±ì·¨ê°€ ê¸°ì¨ì„ ì¤ë‹ˆë‹¤."],
    "ì²œì¹­ìë¦¬": ["ê· í˜• ì¡íŒ ì„ íƒì´ í•„ìš”í•©ë‹ˆë‹¤.", "ì£¼ë³€ê³¼ í˜‘ë ¥í•˜ë©´ í–‰ìš´ì´ ì°¾ì•„ì˜µë‹ˆë‹¤."],
    "ì „ê°ˆìë¦¬": ["ì—´ì •ì´ ì¢‹ì€ ì„±ê³¼ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.", "ê¹Šì€ ëŒ€í™”ê°€ ê´€ê³„ë¥¼ ë”ìš± ëˆë…íˆ í•©ë‹ˆë‹¤."],
    "ì‚¬ìˆ˜ìë¦¬": ["ëª¨í—˜ì‹¬ì´ í–‰ìš´ì„ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤.", "ì—¬í–‰ì´ë‚˜ ì´ë™ì—ì„œ ì¢‹ì€ ì†Œì‹ì´ ìˆìŠµë‹ˆë‹¤."],
    "ì—¼ì†Œìë¦¬": ["ëˆê¸° ìˆëŠ” íƒœë„ê°€ ê²°ì‹¤ì„ ë§ºìŠµë‹ˆë‹¤.", "ë…¸ë ¥ì˜ ë³´ìƒì´ ë‹¤ê°€ì˜µë‹ˆë‹¤."],
}

# --- í–‰ìš´ì˜ ì•„ì´í…œ / ìƒ‰ìƒ ---
lucky_colors = ["íŒŒë€ìƒ‰", "ì´ˆë¡ìƒ‰", "ë…¸ë€ìƒ‰", "ë³´ë¼ìƒ‰", "ë¹¨ê°„ìƒ‰", "í•˜ì–€ìƒ‰", "ê²€ì€ìƒ‰", "ë¶„í™ìƒ‰"]
lucky_items = ["ì±…", "ê½ƒ", "ì»¤í”¼", "íœ´ëŒ€í°", "í—¤ë“œí°", "ë…¸íŠ¸ë¶", "ìš´ë™í™”", "ì‹œê³„", "ë°˜ì§€", "ê°€ë°©"]

# --- í—¤ë” ---
st.markdown("<div class='title'>âœ¨ ë³„ìë¦¬ ì˜¤ëŠ˜ì˜ ìš´ì„¸</div>", unsafe_allow_html=True)
st.markdown("<div class='subtitle'>ìƒì¼ì„ ì…ë ¥í•˜ê³  ë‹¹ì‹ ì˜ ë³„ìë¦¬ì™€ í–‰ìš´ì„ í™•ì¸í•˜ì„¸ìš”</div>", unsafe_allow_html=True)

# ì‚¬ìš©ì ì…ë ¥
name = st.text_input("ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”")
birth = st.date_input("ìƒì¼ì„ ì…ë ¥í•˜ì„¸ìš”", value=datetime.date(2000, 1, 1))

btn = st.button("ì˜¤ëŠ˜ì˜ ìš´ì„¸ ë³´ê¸°")

# --- ê²°ê³¼ ì¶œë ¥ ---
if btn and name:
    zodiac = get_zodiac(birth.month, birth.day)
    today = datetime.date.today().strftime("%Y-%m-%d")
    st.write(f"### ğŸ“… {today} | ğŸ™‹â€â™€ï¸ {name}ë‹˜ì˜ ë³„ìë¦¬: **{zodiac}**")

    fortune = random.choice(zodiac_fortunes[zodiac])
    color = random.choice(lucky_colors)
    item = random.choice(lucky_items)

    st.markdown(f"<div class='fortune-box'>{fortune}</div>", unsafe_allow_html=True)
    st.markdown(f"<div class='lucky-box'>ğŸ¨ í–‰ìš´ì˜ ìƒ‰ìƒ: {color} | ğŸ€ í–‰ìš´ì˜ ì•„ì´í…œ: {item}</div>", unsafe_allow_html=True)

elif btn and not name:
    st.warning("ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!")

